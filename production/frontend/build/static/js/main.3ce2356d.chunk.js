(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{39:function(e,t,c){},64:function(e,t,c){"use strict";c.r(t);c(21);var n=c(1),s=c.n(n),a=c(31),r=c.n(a),i=(c(39),c(14)),l=c(15),j=c(17),o=c(16),d=c(8),h=c(2),u=c(0);var b=function(){return Object(u.jsx)("header",{})};var x=function(e){var t,c,n,s=e.isAuthenticated,a=e.logout;return t="/login",c="login",s&&(t="/logout",c="logout",n=a),Object(u.jsxs)("header",{className:"navbar navbar-expand-lg navbar navbar-dark bg-primary",children:[Object(u.jsx)(d.b,{to:"/",className:"navbar-brand",children:"News-site"}),Object(u.jsxs)("ul",{className:"navbar-nav",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(d.b,{to:"/users",className:"nav-item nav-link",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(d.b,{to:"/articles",className:"nav-item nav-link",children:"\u0421\u0442\u0430\u0442\u044c\u0438"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(d.b,{to:"/comments",className:"nav-item nav-link",children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(d.b,{to:t,className:"nav-link",onClick:n,children:c})})]})]})},O=function(){return Object(u.jsx)("footer",{children:"\xa9 2021"})},m=function(e){var t=e.user;return Object(u.jsxs)("tr",{className:"user-row",children:[Object(u.jsx)("td",{children:t.id}),Object(u.jsx)("td",{children:t.username}),Object(u.jsx)("td",{children:t.img}),Object(u.jsx)("td",{children:t.gender})]})},v=function(e){var t=e.users;return Object(u.jsxs)("div",{className:"users-list",children:[Object(u.jsx)("h1",{children:"Users"}),Object(u.jsxs)("table",{className:"user-list__table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"id"}),Object(u.jsx)("th",{children:"username"}),Object(u.jsx)("th",{children:"img"}),Object(u.jsx)("th",{children:"gender"})]})}),Object(u.jsx)("tbody",{children:t.map((function(e){return Object(u.jsx)(m,{user:e},e.id)}))})]})]})},f=function(e){var t=e.article;return Object(u.jsxs)("tr",{className:"article-row",children:[Object(u.jsx)("td",{children:t.id}),Object(u.jsx)("td",{children:Object(u.jsx)(d.c,{to:"/articles/detail/".concat(t.id),className:"nav-item nav-link",children:t.title})}),Object(u.jsx)("td",{children:t.date}),Object(u.jsx)("td",{children:t.text}),Object(u.jsx)("td",{children:Object(u.jsx)(d.c,{to:"/articles/delete/".concat(t.id),className:"nav-item nav-link",children:"delete"})})]})},g=function(e){var t=e.articles;return Object(u.jsxs)("div",{className:"article-list",children:[Object(u.jsx)("h1",{children:"Articles"}),Object(u.jsxs)("table",{className:"article-list__table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"id"}),Object(u.jsx)("th",{children:"title"}),Object(u.jsx)("th",{children:"date"}),Object(u.jsx)("th",{children:"text"}),Object(u.jsx)("th",{children:"actions"})]})}),Object(u.jsx)("tbody",{children:t.map((function(e){return Object(u.jsx)(f,{article:e},e.id)}))})]})]})},p=function(e){var t=e.articles,c=Object(h.e)().id,n=t.filter((function(e){return e.id===+c}))[0];return Object(u.jsxs)("div",{className:"article-detail",children:[Object(u.jsxs)("span",{children:["Date: ",n.date]}),Object(u.jsxs)("h2",{children:["Article: ",n.title]}),Object(u.jsxs)("h4",{children:["Category: ",n.category]}),Object(u.jsxs)("p",{children:["Img: ",n.img]}),Object(u.jsxs)("p",{children:["Text: ",n.text]})]})},k=function(e){var t=e.comment;return Object(u.jsxs)("tr",{className:"article-row",children:[Object(u.jsx)("td",{children:t.id}),Object(u.jsx)("td",{children:t.article}),Object(u.jsx)("td",{children:t.name}),Object(u.jsx)("td",{children:t.text}),Object(u.jsx)("td",{children:t.created})]})},N=function(e){var t=e.comments;return Object(u.jsxs)("div",{className:"comment-list",children:[Object(u.jsx)("h1",{children:"Comments"}),Object(u.jsxs)("table",{className:"comment-list__table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"id"}),Object(u.jsx)("th",{children:"article"}),Object(u.jsx)("th",{children:"user id"}),Object(u.jsx)("th",{children:"text"}),Object(u.jsx)("th",{children:"created"})]})}),Object(u.jsx)("tbody",{children:t.map((function(e){return Object(u.jsx)(k,{comment:e},e.id)}))})]})]})},y=c(34),S=function(e){Object(j.a)(c,e);var t=Object(o.a)(c);function c(e){var n;return Object(i.a)(this,c),(n=t.call(this,e)).state={username:"",password:""},n}return Object(l.a)(c,[{key:"handleChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.login(this.state.username,this.state.password)}},{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{className:"login-form",children:Object(u.jsxs)("form",{method:"post",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(u.jsx)("input",{type:"text",name:"username",placeholder:"username",onChange:function(t){return e.handleChange(t)}}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"password",onChange:function(t){return e.handleChange(t)}}),Object(u.jsx)("input",{type:"submit",value:"login"})]})})}}]),c}(s.a.Component),T=c(11),C=c.n(T),w=function(e){return"".concat("http://localhost:8000","/api/").concat(e,"/")},A=function(e){Object(j.a)(c,e);var t=Object(o.a)(c);function c(e){var n;return Object(i.a)(this,c),(n=t.call(this,e)).state={users:[],articles:[],comments:[],accessToken:n.getAccessToken()},n}return Object(l.a)(c,[{key:"componentDidMount",value:function(){this.loadState()}},{key:"loadState",value:function(){var e=this,t=this.getHeaders();C.a.get(w("users"),{headers:t}).then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)})),C.a.get(w("articles"),{headers:t}).then((function(t){e.setState({articles:t.data})})).catch((function(e){return console.log(e)})),C.a.get(w("comments"),{headers:t}).then((function(t){e.setState({comments:t.data})})).catch((function(e){return console.log(e)}))}},{key:"login",value:function(e,t){var c=this;C.a.post(w("token"),{username:e,password:t}).then((function(e){var t=e.data.refresh,n=e.data.access;console.log(n),c.saveTokens(t,n),c.setState({accessToken:n},c.loadState)})).catch((function(e){return console.log(e)}))}},{key:"logout",value:function(){localStorage.setItem("refreshToken",null),localStorage.setItem("accessToken",null),this.clearState()}},{key:"clearState",value:function(){this.setState({accessToken:null,users:[],articles:[],comments:[]})}},{key:"saveTokens",value:function(e,t){localStorage.setItem("refreshToken",e),localStorage.setItem("accessToken",t)}},{key:"getAccessToken",value:function(){return localStorage.getItem("accessToken")}},{key:"isAuthenticated",value:function(){return"null"!==this.state.accessToken&&null!==this.state.accessToken}},{key:"getHeaders",value:function(){var e={"Content-Type":"application/json"};return this.isAuthenticated()&&(e.Authorization="Bearer ".concat(this.state.accessToken)),e}},{key:"render",value:function(){var e=this;return console.log("state",this.state),Object(u.jsxs)("div",{className:"main",children:[Object(u.jsxs)(d.a,{children:[Object(u.jsx)(b,{isAuthenticated:this.isAuthenticated(),logout:function(){return e.logout()}}),Object(u.jsx)(x,{}),Object(u.jsx)(h.a,{exact:!0,path:"/users",children:Object(u.jsx)(v,{users:this.state.users})}),Object(u.jsx)(h.a,{exact:!0,path:"/articles",children:Object(u.jsx)(g,{articles:this.state.articles})}),Object(u.jsx)(h.a,{exact:!0,path:"/articles/detail/:id",children:Object(u.jsx)(p,{articles:this.state.articles})}),Object(u.jsx)(h.a,{exact:!0,path:"/comments",children:Object(u.jsx)(N,{comments:this.state.comments})}),Object(u.jsx)(h.a,{exact:!0,path:"/login",children:Object(u.jsx)(S,{login:function(t,c){return e.login(t,c)}})})]}),Object(u.jsx)(O,{})]})}}]),c}(s.a.Component),I=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,65)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(A,{})}),document.getElementById("root")),I()}},[[64,1,2]]]);
//# sourceMappingURL=main.3ce2356d.chunk.js.map